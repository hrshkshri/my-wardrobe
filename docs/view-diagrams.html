<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VYBE Database Schema Diagrams</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        h2 {
            color: #555;
            margin-top: 40px;
            padding: 10px;
            background: #f0f0f0;
            border-left: 4px solid #4CAF50;
        }
        .diagram {
            margin: 30px 0;
            padding: 20px;
            background: #fafafa;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow-x: auto;
        }
        .description {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            border-left: 4px solid #4CAF50;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üóÑÔ∏è VYBE Database Schema - Visual Diagrams</h1>
        <p style="color: #666; font-size: 16px;">Complete visual reference for all database models and relationships</p>

        <!-- COMPLETE ER DIAGRAM -->
        <h2>üìä Complete Entity Relationship Diagram</h2>
        <div class="description">
            <strong>Overview:</strong> This diagram shows ALL 21 models and how they connect to each other.
            <br><strong>Reading tip:</strong> Follow the lines to see relationships between entities.
        </div>
        <div class="diagram">
            <pre class="mermaid">
erDiagram
    %% USER DOMAIN
    User ||--o| StylistProfile : "may have"
    User ||--o{ FCMToken : "has many"
    User ||--o{ Wardrobe : "owns"
    User ||--o{ Outfit : "creates"
    User ||--o{ StylingRequest : "makes"
    User ||--o{ Payment : "makes"
    User ||--o{ Notification : "receives"

    %% STYLIST DOMAIN
    StylistProfile ||--o{ Transaction : "has"
    StylistProfile ||--o{ Withdrawal : "requests"

    %% WARDROBE DOMAIN
    Wardrobe ||--o{ Category : "has"
    Wardrobe ||--o{ ClothingItem : "contains"
    Wardrobe ||--o{ WardrobeShare : "shared via"
    Wardrobe ||--o{ OutfitSuggestion : "receives"

    Category ||--o{ Category : "parent-child"
    Category ||--o{ ClothingItem : "categorizes"

    ClothingItem ||--o{ ClothingImage : "has"
    ClothingItem ||--o{ OutfitItem : "used in"

    %% OUTFIT DOMAIN
    Outfit ||--o{ OutfitItem : "contains"
    Outfit ||--o{ OutfitCalendarEntry : "scheduled in"
    Outfit ||--o{ OutfitShare : "shared via"
    Outfit ||--o{ OutfitSuggestion : "suggested as"

    %% SHARING DOMAIN
    User ||--o{ WardrobeShare : "shares/receives"
    User ||--o{ OutfitShare : "shares/receives"
    User ||--o{ OutfitSuggestion : "suggests"

    %% STYLIST MARKETPLACE DOMAIN
    StylingRequest ||--|| StylingSession : "creates"
    StylingSession ||--o{ Message : "has"
    StylingSession ||--o| Review : "gets"
    StylingSession ||--o| Payment : "requires"

    User ||--o{ StylingSession : "user sessions"
    User ||--o{ StylingSession : "stylist sessions"
    User ||--o{ Message : "sends"
    User ||--o{ Review : "gives/receives"
            </pre>
        </div>

        <!-- USER DOMAIN -->
        <h2>üîµ Domain 1: User Management</h2>
        <div class="description">
            <strong>Models:</strong> User, StylistProfile, FCMToken, Notification
            <br><strong>Purpose:</strong> Authentication, user profiles, stylist profiles, push notifications
        </div>
        <div class="diagram">
            <pre class="mermaid">
erDiagram
    User {
        uuid id PK
        string email UK
        string password
        string name
        string phone
        string bio
        string avatar
        enum role
        boolean emailVerified
        string googleId UK
        string appleId UK
        int freeSessions
        datetime createdAt
        datetime updatedAt
    }

    StylistProfile {
        uuid id PK
        uuid userId FK_UK
        string bio
        int yearsOfExperience
        float pricePerSession
        array languages
        array expertise
        array portfolioImages
        boolean isAvailable
        boolean isVerified
        int totalSessions
        float totalEarnings
        float averageRating
        int totalReviews
        float walletBalance
        datetime createdAt
        datetime updatedAt
    }

    FCMToken {
        uuid id PK
        uuid userId FK
        string token UK
        string deviceId
        datetime createdAt
        datetime updatedAt
    }

    Notification {
        uuid id PK
        uuid userId FK
        enum type
        string title
        string message
        json data
        boolean isRead
        datetime createdAt
    }

    User ||--o| StylistProfile : "has"
    User ||--o{ FCMToken : "has"
    User ||--o{ Notification : "receives"
            </pre>
        </div>

        <!-- WARDROBE DOMAIN -->
        <h2>üü¢ Domain 2: Wardrobe System</h2>
        <div class="description">
            <strong>Models:</strong> Wardrobe, Category, ClothingItem, ClothingImage, WardrobeShare
            <br><strong>Purpose:</strong> Digital wardrobe organization across multiple locations
        </div>
        <div class="diagram">
            <pre class="mermaid">
erDiagram
    Wardrobe {
        uuid id PK
        uuid userId FK
        string name
        string location
        string description
        boolean isDefault
        datetime createdAt
        datetime updatedAt
    }

    Category {
        uuid id PK
        uuid wardrobeId FK
        string name
        uuid parentId FK
        int order
        datetime createdAt
        datetime updatedAt
    }

    ClothingItem {
        uuid id PK
        uuid wardrobeId FK
        uuid categoryId FK
        string name
        string itemType
        string color
        enum season
        string brand
        string notes
        datetime purchaseDate
        float price
        enum status
        boolean isPrivate
        datetime createdAt
        datetime updatedAt
    }

    ClothingImage {
        uuid id PK
        uuid itemId FK
        string url
        int order
        datetime createdAt
    }

    WardrobeShare {
        uuid id PK
        uuid wardrobeId FK
        uuid ownerId FK
        uuid sharedWithId FK
        enum permission
        datetime expiresAt
        datetime createdAt
        datetime updatedAt
    }

    Wardrobe ||--o{ Category : "has"
    Wardrobe ||--o{ ClothingItem : "contains"
    Wardrobe ||--o{ WardrobeShare : "shared via"

    Category ||--o{ Category : "parent-child"
    Category ||--o{ ClothingItem : "categorizes"

    ClothingItem ||--o{ ClothingImage : "has"
            </pre>
        </div>

        <!-- OUTFIT DOMAIN -->
        <h2>üü° Domain 3: Outfit Management</h2>
        <div class="description">
            <strong>Models:</strong> Outfit, OutfitItem, OutfitCalendarEntry, OutfitShare, OutfitSuggestion
            <br><strong>Purpose:</strong> Create, save, and plan outfit combinations
        </div>
        <div class="diagram">
            <pre class="mermaid">
erDiagram
    Outfit {
        uuid id PK
        uuid userId FK
        string name
        string description
        enum season
        string occasion
        array tags
        boolean isFavorite
        string previewImage
        datetime createdAt
        datetime updatedAt
    }

    OutfitItem {
        uuid id PK
        uuid outfitId FK
        uuid itemId FK
        int order
        datetime createdAt
    }

    OutfitCalendarEntry {
        uuid id PK
        uuid outfitId FK
        uuid userId FK
        datetime scheduledDate UK
        string notes
        datetime createdAt
        datetime updatedAt
    }

    OutfitShare {
        uuid id PK
        uuid outfitId FK
        uuid ownerId FK
        uuid sharedWithId FK
        enum permission
        datetime expiresAt
        datetime createdAt
        datetime updatedAt
    }

    OutfitSuggestion {
        uuid id PK
        uuid wardrobeId FK
        uuid outfitId FK
        uuid suggestedById FK
        boolean isAccepted
        string comment
        datetime createdAt
        datetime updatedAt
    }

    Outfit ||--o{ OutfitItem : "contains"
    Outfit ||--o{ OutfitCalendarEntry : "scheduled"
    Outfit ||--o{ OutfitShare : "shared via"
    Outfit ||--o{ OutfitSuggestion : "suggested as"
            </pre>
        </div>

        <!-- STYLIST MARKETPLACE DOMAIN -->
        <h2>üî¥ Domain 4: Stylist Marketplace</h2>
        <div class="description">
            <strong>Models:</strong> StylingRequest, StylingSession, Message, Review
            <br><strong>Purpose:</strong> On-demand stylist marketplace (Rapido model)
        </div>
        <div class="diagram">
            <pre class="mermaid">
erDiagram
    StylingRequest {
        uuid id PK
        uuid userId FK
        string occasion
        enum timeline
        enum requestType
        datetime scheduledStartTime
        datetime scheduledEndTime
        array preferredStyles
        float budget
        string notes
        enum status
        uuid matchedStylistId
        datetime expiresAt
        datetime createdAt
        datetime updatedAt
    }

    StylingSession {
        uuid id PK
        uuid requestId FK_UK
        uuid userId FK
        uuid stylistId FK
        enum status
        datetime startedAt
        datetime endedAt
        boolean isFreeSession
        float amountCharged
        float platformFee
        float stylistEarning
        datetime createdAt
        datetime updatedAt
    }

    Message {
        uuid id PK
        uuid sessionId FK
        uuid senderId FK
        string content
        array images
        boolean isRead
        datetime createdAt
    }

    Review {
        uuid id PK
        uuid sessionId FK_UK
        uuid userId FK
        uuid stylistId FK
        int rating
        string comment
        boolean isFlagged
        datetime createdAt
        datetime updatedAt
    }

    StylingRequest ||--|| StylingSession : "creates"
    StylingSession ||--o{ Message : "has"
    StylingSession ||--o| Review : "gets"
            </pre>
        </div>

        <!-- PAYMENT DOMAIN -->
        <h2>üü£ Domain 5: Payments</h2>
        <div class="description">
            <strong>Models:</strong> Payment, Transaction, Withdrawal
            <br><strong>Purpose:</strong> Payment processing and stylist wallet management
        </div>
        <div class="diagram">
            <pre class="mermaid">
erDiagram
    Payment {
        uuid id PK
        uuid sessionId FK_UK
        uuid userId FK
        float amount
        float platformFee
        float stylistEarning
        string razorpayOrderId UK
        string razorpayPaymentId UK
        string razorpaySignature
        enum status
        datetime createdAt
        datetime updatedAt
    }

    Transaction {
        uuid id PK
        uuid stylistProfileId FK
        enum type
        float amount
        string description
        float balanceBefore
        float balanceAfter
        datetime createdAt
    }

    Withdrawal {
        uuid id PK
        uuid stylistProfileId FK
        float amount
        string bankAccountNumber
        string ifscCode
        string accountHolderName
        enum status
        datetime processedAt
        string failureReason
        datetime createdAt
        datetime updatedAt
    }

    Payment ||--|| StylingSession : "for"
    Transaction ||--|| StylistProfile : "tracks"
    Withdrawal ||--|| StylistProfile : "requests"
            </pre>
        </div>

        <!-- LEGEND -->
        <h2>üìñ Diagram Legend</h2>
        <div class="description">
            <strong>Relationship Symbols:</strong>
            <ul style="margin: 10px 0;">
                <li><strong>||--o|</strong> = One to Zero-or-One (optional)</li>
                <li><strong>||--o{</strong> = One to Zero-or-Many (most common)</li>
                <li><strong>||--||</strong> = One to Exactly One (required)</li>
            </ul>
            <strong>Field Notation:</strong>
            <ul style="margin: 10px 0;">
                <li><strong>PK</strong> = Primary Key</li>
                <li><strong>FK</strong> = Foreign Key</li>
                <li><strong>UK</strong> = Unique Constraint</li>
                <li><strong>FK_UK</strong> = Foreign Key + Unique</li>
            </ul>
        </div>

        <div style="margin-top: 40px; padding: 20px; background: #e3f2fd; border-radius: 4px; border-left: 4px solid #2196F3;">
            <strong>üí° Tip:</strong> Use your browser's zoom (Ctrl/Cmd + Plus/Minus) to adjust diagram size for better readability.
        </div>
    </div>
</body>
</html>
